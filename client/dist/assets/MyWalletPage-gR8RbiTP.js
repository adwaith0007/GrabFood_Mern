import{u as p,r as a,j as e,S as c,i as x}from"./index-tC-h3qrC.js";const w=[{Header:e.jsx("div",{className:"flex justify-center ",children:"S.no"}),accessor:"no"},{Header:e.jsx("div",{className:"flex justify-center ",children:"Date"}),accessor:"date"},{Header:e.jsx("div",{className:"flex justify-center ",children:"Transaction"}),accessor:"transaction"},{Header:e.jsx("div",{className:"flex justify-center ",children:"Amount"}),accessor:"amount"}],S=()=>{const{user:f}=p(s=>s.userReducer),r=f._id,[u,j]=a.useState([]),[l,h]=a.useState([]),[i,m]=a.useState(),[o,y]=a.useState(!0);a.useEffect(()=>{(async()=>{try{const t=await x.get(`/user/${r}/wallet`);m(t.data.data)}catch(t){console.log(t)}})()},[r]);const v=async()=>{try{const s=await x.get(`/order/${r}/transactions`);s.data.success?h(s.data.transactions):console.error("Failed to fetch user orders:",s.data.error)}catch(s){console.error("Error fetching user orders:",s)}finally{y(!1)}};a.useEffect(()=>{v()},[r]);const d=a.useMemo(()=>Array(12).fill({}).map(()=>({no:e.jsxs("div",{className:"flex justify-center ",children:[e.jsx(c,{width:30}),","]}),date:e.jsxs("div",{className:"flex  justify-center gap-1",children:[e.jsx(c,{width:200}),","]}),transaction:e.jsx("div",{className:"flex justify-center",children:e.jsx(c,{width:100})}),amount:e.jsx("div",{className:"flex justify-center",children:e.jsx(c,{width:80})})})),[]);return a.useEffect(()=>{const s=o?d:l.map((t,n)=>({no:e.jsx("div",{className:"flex justify-center ",children:n+1}),date:e.jsx("div",{className:"flex flex-col justify-center gap-1",children:e.jsxs("div",{className:"flex justify-center",children:[" ",t==null?void 0:t.date]})}),transaction:e.jsx("div",{className:"flex justify-center",children:t.type}),amount:e.jsxs("div",{className:"flex justify-center",children:["â‚¹",t.amount]}),totalPrice:t.totalPrice}));j(s)},[l,o,d]),e.jsx("div",{className:"h-full",children:e.jsx("div",{className:"table-container h-full",style:{overflowY:"auto"},children:e.jsxs("table",{className:"table",style:{width:"100%"},children:[e.jsx("thead",{children:e.jsx("tr",{children:w.map(s=>e.jsx("th",{className:"text-center",children:s.Header},String(s.accessor)))})}),e.jsx("tbody",{children:u.map((s,t)=>e.jsx("tr",{children:Object.values(s).map((n,N)=>e.jsx("td",{className:"text-center",children:n},N))},t))}),e.jsx("tfoot",{children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"justify-center text-center",children:"Total:"}),e.jsx("td",{className:"flex justify-center text-center",children:i!==void 0?i.toFixed(2):e.jsx(c,{width:50})})]})})]})})})};export{S as default};
