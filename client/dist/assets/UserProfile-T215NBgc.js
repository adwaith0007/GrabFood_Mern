import{G as p,u as j,a as N,b as w,r as m,w as g,j as a,U as y,i as h,_ as I,e as C,q as z}from"./index-8POfungT.js";function E(r){return p({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M17 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}}]})(r)}function k(r){return p({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 000-1.41l-2.34-2.34a.996.996 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}}]})(r)}function M(r){return p({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}}]})(r)}const S="https://www.grabfood.life",H=()=>{const{user:r}=j(s=>s.userReducer),o=r==null?void 0:r._id,f=N(),u=w(),[n,c]=m.useState(!1),[e,i]=m.useState({name:"",gender:"",email:"",phoneNumber:"",profileImage:""});m.useEffect(()=>{(async()=>{try{const t=await h.get(`/user/get/${o}`);if(console.log("data:",t.data),t&&t.data){const l=t.data.data;i({name:l.username,gender:l.gender,email:l.email,phoneNumber:l.phone,profileImage:l.profilePicture})}}catch(t){console.error("Error fetching user data:",t),I.error(t.response.data.message),t.response.data.message==="User is blocked"&&(C.remove("token"),u(z()),f("/login"))}})()},[o]);const x=()=>{c(!0)},b=async()=>{try{const s=new FormData;s.append("name",e==null?void 0:e.name),s.append("gender",e==null?void 0:e.gender),s.append("email",e==null?void 0:e.email),s.append("phoneNumber",e==null?void 0:e.phoneNumber),s.append("profileImage",e==null?void 0:e.profileImage);const t=await h.put(`/user/edit/${o}`,s,{headers:{"Content-Type":"multipart/form-data"}});t.status===200?(console.log("User profile updated successfully"),i(l=>({...l,profileImage:t.data.data.profilePicture}))):console.error("Error updating user profile"),c(!1)}catch(s){console.error("Error updating user profile:",s)}},d=(s,t)=>{if(s==="profileImage"){const l=t[0];i({...e,[s]:l})}else i({...e,[s]:t})},v=typeof e.profileImage=="string"?`${S}/${e.profileImage.replace(/ /g,"%20")}`:`${g}`;return a.jsxs("div",{className:"admin-container",children:[a.jsx(y,{}),a.jsx("div",{className:"container flex flex-col items-center  mx-auto mt-10 p-6 bg-white rounded-md shadow-md",children:a.jsxs("div",{className:" flex flex-col justify-center items-center border-2 rounded-[10px] shadow w-[350px] h-[450px] mt-5 ",children:[a.jsxs("div",{className:"flex flex-col items-center  ",children:[a.jsx("div",{className:"relative w-32 h-32",children:a.jsx("img",{src:v||g,alt:"user",className:"w-full h-full object-cover rounded-full"})}),n&&a.jsxs("label",{htmlFor:"profileImage",className:" cursor-pointer",children:[a.jsx("input",{type:"file",id:"profileImage",accept:"image/*",className:"hidden",onChange:s=>d("profileImage",s.target.files)}),a.jsx("span",{className:"p-1  bg-blue-500 text-white rounded-full",children:"Change Image"})]}),a.jsx("div",{children:a.jsx("div",{className:"font-semibold text-lg",children:r==null?void 0:r.name})})]}),a.jsxs("div",{className:"mt-6  flex flex-col justify-center items-center ",children:[a.jsx("div",{className:"flex items-center mb-4",children:n?a.jsx("input",{type:"email",value:e==null?void 0:e.email,onChange:s=>d("email",s.target.value),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 ",placeholder:"Email"}):a.jsx("span",{children:e==null?void 0:e.email})}),a.jsx("div",{className:"flex w-full justify-center items-center mb-4",children:n?a.jsx("input",{type:"tel",value:e==null?void 0:e.phoneNumber,onChange:s=>d("phoneNumber",s.target.value),className:"bg-gray-50 border   border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500  w-full p-2.5 ",placeholder:"Phone Number"}):a.jsx("span",{children:e==null?void 0:e.phoneNumber})})]}),a.jsx("div",{className:"flex items-center justify-between mt-10 ",children:n?a.jsxs("div",{className:"flex  justify-center items-center gap-[100px]",children:[a.jsxs("button",{onClick:b,className:"text-green-500 hover:underline cursor-pointer",children:[a.jsx(E,{size:20,className:"inline-block mb-1"}),"Save"]}),a.jsxs("button",{onClick:()=>c(!1),className:"text-red-500 hover:underline cursor-pointer",children:[a.jsx(M,{size:20,className:"inline-block mb-1"}),"Cancel"]})]}):a.jsxs("button",{onClick:x,className:"text-blue-500 hover:underline cursor-pointer",children:[a.jsx(k,{size:20,className:"inline-block mb-1"}),"Edit Profile"]})})]})})]})};export{H as default};
