import{j as t,u as H,r as a,L as D,m as Q,o as O,i as l,b as W,a as X,p as G,_ as h,e as J,q as K,s as V}from"./index-pULZCOVt.js";const Y=({name:o,imageUrl:n,handler:x})=>{const g=()=>{x(o)};return t.jsx("div",{className:"flex flex-col  items-center gap-3",children:t.jsxs("button",{onClick:g,children:[t.jsx("div",{className:"w-[200px] h-[192px]  rounded-[100%] flex justify-center overflow-hidden shadow-md",children:t.jsx("img",{className:"object-cover cursor-pointer ",src:n,alt:""})}),t.jsx("h3",{className:"font-bold",children:o})]})})},Z=({productId:o,price:n,name:x,discountPrice:g,offerInPercentage:j,description:m,imageUrl:v,onAddToCart:I})=>{const{user:k}=H(r=>r.userReducer),c=k._id,[p,N]=a.useState([]),i=async()=>{try{const r=await l.get(`/user/${c}/wishlist`);r.data.success?N(r.data.data):console.error("Failed to fetch user orders:",r.data.error)}catch(r){console.error("Error fetching user orders:",r)}};a.useEffect(()=>{i()},[c]);const $=async()=>{try{const r=k._id;(await l.post("/user/wishlist/add",{userId:r,productId:o})).data.success&&i()}catch(r){console.error(r)}};return t.jsxs("div",{className:"relative m-10 flex w-full max-w-xs  flex-col overflow-hidden rounded-lg border border-gray-100 bg-white shadow-md",children:[t.jsxs(D,{className:"relative mx-3 mt-3 flex h-60 overflow-hidden rounded-xl",to:`/product/${o}`,children:[t.jsx("img",{className:"object-cover",src:v,alt:"product image"}),j&&t.jsxs("span",{className:"absolute top-0 left-0 m-2 rounded-full bg-black px-2 text-center text-sm font-medium text-white",children:[j,"% OFF"]})]}),t.jsx("button",{onClick:$,className:" absolute z-10 top-0 right-0 mt-4 mr-6 rounded-full bg-black px-2 border focus:outline-none",children:t.jsx(Q,{icon:O,color:p.some(r=>r.productId===o)?"red":"white"})}),t.jsxs("div",{className:"mt-4 px-5 pb-5",children:[t.jsx("a",{href:"#",children:t.jsx("h5",{className:"text-xl tracking-tight text-slate-900 line-clamp-1 ",children:x})}),t.jsxs("div",{className:"mt-2 mb-2 flex items-center justify-between",children:[g?t.jsxs("p",{children:[t.jsxs("span",{className:"text-3xl font-bold text-slate-900",children:["₹",g]}),t.jsxs("span",{className:"text-sm text-slate-900 line-through",children:["₹",n]})]}):t.jsx("p",{children:t.jsxs("span",{className:"text-3xl font-bold text-slate-900",children:["₹",n]})}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("svg",{"aria-hidden":"true",className:"h-5 w-5 text-yellow-300",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),t.jsx("svg",{"aria-hidden":"true",className:"h-5 w-5 text-yellow-300",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),t.jsx("svg",{"aria-hidden":"true",className:"h-5 w-5 text-yellow-300",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),t.jsx("svg",{"aria-hidden":"true",className:"h-5 w-5 text-yellow-300",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),t.jsx("svg",{"aria-hidden":"true",className:"h-5 w-5 text-yellow-300",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),t.jsx("span",{className:"mr-2 ml-3 rounded bg-yellow-200 px-2.5 py-0.5 text-xs font-semibold",children:"5.0"})]})]}),t.jsx("div",{className:"px-4 mb-4 hidden md:block overflow-hidden h-10 ",children:t.jsx("p",{className:"text-sm text-slate-900 line-clamp-2",children:m})}),t.jsxs("button",{onClick:I,className:"flex w-full items-center justify-center rounded-md bg-slate-900 px-5 py-2.5 text-center text-sm font-medium text-white hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-blue-300",children:[t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mr-2 h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),"Add to cart"]})]})]})},S="https://www.grabfood.life",te=()=>{const{user:o}=H(e=>e.userReducer),n=W(),x=X(),g=o==null?void 0:o._id,j=G(),m=new URLSearchParams(j.search).get("q"),[v,I]=a.useState([]),[k,c]=a.useState([]),[p,N]=a.useState([]),[i,$]=a.useState(""),[r,f]=a.useState(1),[C,w]=a.useState(1),[E,F]=a.useState(""),[d,y]=a.useState(!1),[L,M]=a.useState(!1),b=8;a.useEffect(()=>{try{l.get("/category/get").then(e=>{e.data.success&&I(e.data.data)})}catch(e){h.error("Error while loading categories"),console.log(e)}},[]),a.useEffect(()=>{m?B(m):_()},[i,r,m]),a.useEffect(()=>{_()},[i,r]),a.useEffect(()=>{function e(s){s.target.id!="menu-item-0"&&(console.log(s),y(!1),M(!1))}return(d||L)&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[d,L]);const _=async()=>{try{const e=await l.get(`/product/get?category=${i}&page=${r}&limit=${b}`);e.data.success?(c(e.data.data),w(e.data.totalPages)):console.error("Failed to fetch products",e.data.error)}catch(e){h.error("Error while loading products"),console.log("status:",e),e.response.data.message==="User is blocked"&&(J.remove("token"),n(K()),x("/login"))}},T=()=>{console.log("clicked best pro");try{l.get(`/product/get_best?category=${i}&page=${r}&limit=${b}`).then(e=>{e.data.success&&(c(e.data.data),w(e.data.totalPages))}),y(!d)}catch(e){h.error("Error while loading products"),console.log(e)}},A=async()=>{try{const e=await l.get(`/product/get_LowToHigh?page=${r}&limit=${b}`);e.data.success?(c(e.data.data),w(e.data.totalPages)):console.error("Unsuccessful response from the API:",e.data.message),y(!d)}catch(e){h.error("Error while loading products"),console.error("API call error:",e)}},U=async()=>{console.log("clicked");try{const e=await l.get(`/product/get_HighToLow?page=${r}&limit=${b}`);e.data.success?(c(e.data.data),w(e.data.totalPages)):console.error("Unsuccessful response from the API:",e.data.message),y(!d)}catch(e){h.error("Error while loading products"),console.error("API call error:",e)}},B=e=>{try{l.get(`/product/search?q=${e}&page=${r}&limit=${b}`).then(s=>{s.data.success&&(c(s.data.data),w(s.data.totalPages))})}catch(s){h.error("Error while searching products"),console.log(s)}},q=e=>{if(l.post(`/cart/add/${g}`,{product:e,quantity:1}).then(u=>console.log("Product added to cart:",u.data)).catch(u=>console.error("Error adding to cart:",u)),p.find(u=>u.productId===e._id)){const u=p.map(P=>P.productId===e._id?{...P,quantity:P.quantity+1}:P);N(u)}else n(V(e.productName)),N([...p,{productId:e._id,quantity:1,name:e.productName,price:e.price,imageUrl:`${S}/${e.productImage[0].replace(/ /g,"%20")}`}]);h.success(`${e.productName} added to cart!`)},z=e=>{$(e),f(1)},R=e=>{e.preventDefault(),B(E)};return t.jsxs("div",{className:"bg-[#e5d9ca] h-full ",children:[t.jsxs("div",{className:"container custom-height flex flex-col justify-center items-center mx-auto  ",children:[t.jsx("div",{className:" lg:hidden mt-5 flex justify-center items-center",children:t.jsx("div",{className:"relative text-gray-600",children:t.jsxs("form",{onSubmit:R,children:[t.jsx("input",{type:"search",name:"search",value:E,onChange:e=>F(e.target.value),placeholder:"Search...",className:"bg-white h-10 px-5 pr-10 rounded-full text-sm focus:outline-none"}),t.jsx("button",{type:"submit",className:"absolute right-0 top-0 mt-3 mr-4",children:t.jsx("svg",{className:"h-4 w-4 fill-current",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",version:"1.1",id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 56.966 56.966",xmlSpace:"preserve",width:"512px",height:"512px",children:t.jsx("path",{d:"M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z"})})})]})})}),t.jsx("div",{className:" hidden lg:flex gap-4 ",children:v.map(e=>t.jsx("div",{children:e.categoryImage&&e.categoryImage[0]&&t.jsx(t.Fragment,{children:t.jsx(Y,{name:e.category,imageUrl:`${S}/${e.categoryImage[0].replace(/ /g,"%20")}`,handler:()=>z(e.category)})})},e._id))}),t.jsxs("div",{className:"w-full border-t mt-5 border-[#9a9b9e] flex justify-between ",children:[t.jsxs("div",{className:"relative inline-block text-left",children:[t.jsx("div",{children:t.jsxs("button",{onClick:()=>y(!d),type:"button",className:"inline-flex w-full justify-center gap-x-1.5 mt-2  px-3 py-2 text-sm font-semibold text-gray-900  ",id:"menu-button","aria-expanded":"true","aria-haspopup":"true",children:["Sort",t.jsx("svg",{className:"-mr-1 h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:t.jsx("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z","clip-rule":"evenodd"})})]})}),d&&t.jsx("div",{className:"absolute left-0 ml-2 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",role:"menu","aria-orientation":"vertical","aria-labelledby":"menu-button",children:t.jsxs("div",{className:"py-1",role:"none",id:"hello",children:[t.jsx("button",{onClick:()=>{T()},className:"text-gray-700 block px-4 py-2 text-sm",role:"menuitem",id:"menu-item-0",children:"Best selling product"}),t.jsx("button",{onClick:()=>{A()},className:"text-gray-700 block px-4 py-2 text-sm",role:"menuitem",id:"menu-item-0",children:"Price: Low to High"}),t.jsx("button",{onClick:()=>{U()},className:"text-gray-700 block px-4 py-2 text-sm",role:"menuitem",id:"menu-item-0",children:"Price: High to Low"})]})})]}),t.jsxs("div",{className:"relative lg:hidden inline-block text-left",children:[t.jsx("div",{children:t.jsxs("button",{onClick:()=>M(!L),type:"button",className:"inline-flex w-full justify-center gap-x-1.5 mt-2  px-3 py-2 text-sm font-semibold text-gray-900  ",id:"menu-button","aria-expanded":"true","aria-haspopup":"true",children:["Category",t.jsx("svg",{className:"-mr-1 h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:t.jsx("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z","clip-rule":"evenodd"})})]})}),L&&t.jsx("div",{className:"absolute right-0 z-20 mt-2 mr-2  w-40 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",role:"menu","aria-orientation":"vertical","aria-labelledby":"menu-button",children:t.jsx("div",{className:"py-1",role:"none",children:v.map(e=>t.jsx("div",{children:e.categoryImage&&e.categoryImage[0]&&t.jsx(t.Fragment,{children:t.jsx("button",{onClick:()=>z(e.category),className:"text-gray-700 block px-4 py-2 text-sm",role:"menuitem",id:"menu-item-0",children:e.category})})},e._id))})})]})]}),t.jsx("div",{className:"grid grid-cols-1  justify-center  md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:k.map(e=>t.jsx("div",{className:"flex",children:e.productImage&&e.productImage[0]&&t.jsx(t.Fragment,{children:t.jsx(Z,{productId:e._id,price:e.price,description:e.Description,name:e.productName,discountPrice:e==null?void 0:e.discountPrice,offerInPercentage:e.offerInPercentage,imageUrl:`${S}/${e.productImage[0].replace(/ /g,"%20")}`,onAddToCart:()=>q(e)})})},e._id))})]}),t.jsx("div",{className:"flex justify-center pt-2 pb-10 ",children:t.jsx("nav",{"aria-label":"Page navigation example",children:t.jsxs("ul",{className:"inline-flex -space-x-px text-base h-10",children:[t.jsx("li",{children:t.jsx("button",{onClick:()=>f(e=>Math.max(e-1,1)),disabled:r===1,className:`flex items-center justify-center px-4 h-10 leading-tight text-gray-500 bg-white border border-e-0 border-gray-300 rounded-l-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white ${r===1?"cursor-not-allowed":"cursor-pointer"}`,children:"Previous"})}),[...Array(C)].map((e,s)=>t.jsx("li",{children:t.jsx("button",{onClick:()=>f(s+1),className:`flex items-center justify-center px-4 h-10 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white ${r===s+1?"text-blue-600 bg-blue-50 hover:bg-blue-100 hover:text-blue-700 dark:border-gray-700 dark:bg-gray-700 dark:text-white":""}`,children:s+1})},s)),t.jsx("li",{children:t.jsx("button",{onClick:()=>f(e=>Math.min(e+1,C)),disabled:r===C,className:`flex items-center justify-center px-4 h-10 leading-tight text-gray-500 bg-white border border-gray-300 rounded-r-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white ${r===C?"cursor-not-allowed":"cursor-pointer"}`,children:"Next"})})]})})})]})};export{te as default};
