import{r,j as e,x as v,_ as S,i as g,u as z}from"./index-SiLwYWCA.js";const F=({userId:l,setAddress:m,onClose:t})=>{const[o,x]=r.useState(""),[h,n]=r.useState(""),[b,p]=r.useState(""),[s,c]=r.useState(""),N=async a=>{a.preventDefault();const i={street:o,city:h,state:b,zipCode:s};try{if(!l){console.error("User ID is undefined");return}if(!i.city||!i.state||!i.street||!i.zipCode){S.error("Please fill in all address fields.");return}await g.put(`/addaddresses/${l}`,{userId:l,address:i}),g.get(`/user/${l}/addresses`).then(u=>{if(u.data.length!=0){const j=u.data[0];m(j)}else console.log(" add no address")}),t()}catch(u){console.error(u)}};return e.jsx("div",{className:"fixed top-0 right-0 left-0 bottom-0 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white p-8 z-50 rounded-md shadow-md md:w-[400px]",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:t,className:"text-gray-600 hover:text-gray-800",children:e.jsx(v,{size:24})})}),e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Enter Your Address "}),e.jsxs("form",{onSubmit:N,children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{htmlFor:"street",className:"block text-sm font-medium text-gray-600",children:"Street:"}),e.jsx("input",{type:"text",id:"street",value:o,onChange:a=>x(a.target.value),className:"mt-1 p-2 border rounded-md w-full"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-600",children:"City:"}),e.jsx("input",{type:"text",id:"city",value:h,onChange:a=>n(a.target.value),className:"mt-1 p-2 border rounded-md w-full"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-600",children:"State:"}),e.jsx("input",{type:"text",id:"state",value:b,onChange:a=>p(a.target.value),className:"mt-1 p-2 border rounded-md w-full"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{htmlFor:"zipCode",className:"block text-sm font-medium text-gray-600",children:"ZIP Code:"}),e.jsx("input",{type:"text",id:"zipCode",value:s,onChange:a=>c(a.target.value),className:"mt-1 p-2 border rounded-md w-full"})]}),e.jsx("button",{type:"submit",className:"mt-4 p-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Save Address"})]})]})})},_=({onClose:l,onAddressSelect:m})=>{const{user:t}=z(s=>s.userReducer),o=t._id,[x,h]=r.useState([]),[n,b]=r.useState(null);r.useEffect(()=>{o&&g.get(`/user/${o}/addresses`).then(s=>{h(s.data)}).catch(s=>{console.error(s)})},[o]);const p=s=>{s.preventDefault(),n&&(m(n),l()),console.log(n)};return e.jsx("div",{className:"fixed top-0 right-0 left-0 bottom-0 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white p-8 z-50 rounded-md shadow-md w-[400px]",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:l,className:"text-gray-600 hover:text-gray-800",children:e.jsx(v,{size:24})})}),e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Choose Your Address"}),e.jsxs("form",{onSubmit:p,className:"mt-5 grid gap-6   ",children:[e.jsx("div",{className:"h-[300px]    overflow-auto",children:x.map((s,c)=>e.jsxs("div",{className:"relative mb-2 mx-3 ",children:[e.jsx("input",{className:"peer hidden",id:`radio_${c}`,type:"radio",name:"radio",onChange:()=>b(s)}),e.jsx("span",{className:"peer-checked:border-gray-700 absolute right-4 top-1/2 box-content block h-3 w-3 -translate-y-1/2 rounded-full border-8 border-gray-300 bg-white"}),e.jsx("label",{className:"peer-checked:border-2 peer-checked:border-gray-700 peer-checked:bg-gray-50 flex cursor-pointer select-none rounded-lg border border-gray-300 p-4",htmlFor:`radio_${c}`,children:e.jsxs("div",{className:"ml-5",children:[e.jsx("span",{className:"mt-2 font-semibold",children:s.street}),e.jsx("p",{className:"text-slate-500 text-sm leading-6",children:"Delivery: 2-4 Days"})]})})]},c))}),e.jsx("button",{type:"submit",className:"mt-4 p-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Save Address"})]})]})})},D=({userId:l,onhandleUpdateAddress:m,currentAddress:t,onClose:o})=>{const[x,h]=r.useState(t.street||""),[n,b]=r.useState(t.city||""),[p,s]=r.useState(t.state||""),[c,N]=r.useState(t.zipCode||""),[a,i]=r.useState(!1),[u,j]=r.useState(null),f=async d=>{d.preventDefault();const y={_id:t._id,street:x,city:n,state:p,zipCode:c};try{if(i(!0),!l){console.error("User ID is undefined");return}await g.put(`/user/${l}/addresses/${t._id}`,{userId:l,addressId:t._id,address:y}),m(y),o()}catch(w){console.error(w),j("Failed to update address. Please try again.")}finally{i(!1)}},C=async()=>{try{i(!0),await g.delete(`/user/${l}/addresses/${t._id}`),g.get(`/user/${l}/addresses`).then(d=>{if(d.data.length!=0){const y=d.data[0];m(y)}else console.log("no address"),m("no_address")}),o()}catch(d){console.error(d),j("Failed to delete address. Please try again.")}finally{i(!1)}};return e.jsx("div",{className:"fixed top-0 right-0 left-0 bottom-0 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white p-8 z-50 rounded-md shadow-md w-[400px]",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:o,className:"text-gray-600 hover:text-gray-800",children:e.jsx(v,{size:24})})}),e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Update Your Address "}),u&&e.jsx("p",{className:"text-red-500 mb-2",children:u}),e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{htmlFor:"street",className:"block text-sm font-medium text-gray-600",children:"Street:"}),e.jsx("input",{type:"text",id:"street",placeholder:t.street,value:x,onChange:d=>h(d.target.value),onBlur:f,className:"mt-1 p-2 border rounded-md w-full"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-600",children:"City:"}),e.jsx("input",{type:"text",id:"city",value:n,placeholder:t.city,onChange:d=>b(d.target.value),onBlur:f,className:"mt-1 p-2 border rounded-md w-full"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-600",children:"State:"}),e.jsx("input",{type:"text",id:"state",placeholder:t.state,value:p,onChange:d=>s(d.target.value),onBlur:f,className:"mt-1 p-2 border rounded-md w-full"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{htmlFor:"zipCode",className:"block text-sm font-medium text-gray-600",children:"ZIP Code:"}),e.jsx("input",{type:"text",id:"zipCode",placeholder:t.zipCode,value:c,onChange:d=>N(d.target.value),onBlur:f,className:"mt-1 p-2 border rounded-md w-full"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{type:"submit",className:"mt-4 p-2 px-4 bg-blue-500 text-white rounded-md hover:bg-blue-600",disabled:a,children:a?"Updating...":"Update Address"}),e.jsx("button",{type:"button",onClick:C,className:"mt-4 p-2 px-4 bg-red-500 text-white rounded-md hover:bg-red-600 ml-2",disabled:a,children:a?"Deleting...":"Delete Address"})]})]})]})})};export{F as A,_ as C,D as U};
