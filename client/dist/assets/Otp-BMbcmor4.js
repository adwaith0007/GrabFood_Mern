import{r as n,j as e,u as p,a as j,n as c}from"./index-tRytz_Dc.js";import{o as y}from"./otp-Hz6nkJWk.js";import{g as h,v}from"./helper-KtOLMMPi.js";const N=({expiryTime:x,visible:a,onExpiry:o})=>{const i=()=>{const r=x-Date.now();let d={minutes:0,seconds:0};if(r>0){const s=Math.floor(r/1e3/60%60),l=Math.floor(r/1e3%60);d={minutes:s<10?`0${s}`:s,seconds:l<10?`0${l}`:l}}else o();return d},[u,m]=n.useState(()=>i());return n.useEffect(()=>{if(!a)return;const r=setTimeout(()=>{m(i())},1e3);return()=>clearTimeout(r)}),e.jsx("div",{className:"flex justify-center items-center space-x-2",children:a&&e.jsxs("span",{className:"text-xl text-black font-medium",children:[u.minutes,":",u.seconds]})})},O=()=>{const[x,a]=n.useState(""),[o,i]=n.useState(!1),[u,m]=n.useState(!0),r=Date.now()+6e4,{registeredUsername:d}=p(t=>t.userReducer),s=d,l=j();n.useEffect(()=>{h(s).then(t=>(console.log(t),t?c.success("OTP has been sent to your email! "):c.error("Problem while generating OTP!")))},[s]);async function g(t){t.preventDefault();const{status:f}=await v({username:s,code:x});return f===201?(c.success("Verification Successful! "),l("/")):c.error("Wrong OTP! Check email again!")}function b(){const t=h(s);c.promise(t,{loading:"Sending...",success:e.jsx("b",{children:"OTP has been sent to your email!"}),error:e.jsx("b",{children:"Could not Send it!"})}),t.then(f=>console.log(f)),i(!0),m(!0)}return e.jsx("div",{className:"bg-[#e5d9ca] h-screen w-full ",children:e.jsx("div",{className:"container h-[90%] flex justify-center items-center mx-auto ",children:e.jsxs("div",{className:"flex flex-row w-full h-full flex-wrap  justify-center items-center p-8 ",children:[e.jsx("div",{className:"  hidden xl:flex w-1/2 ",children:e.jsx("img",{className:" h-[600px]  rounded-l-[10px]  lg:h-[600px] object-cover w-full ",src:y,alt:""})}),e.jsx("div",{className:" flex justify-center    ",children:e.jsxs("div",{className:" w-full px-10 lg:h-[600px] lg:w-[470px] rounded-r-[10px] bg-[#f4eeee]",children:[e.jsx("div",{className:"text-center text-lg font-bold text-[30px] mt-[50px]",children:e.jsx("h1",{children:"OTP Verification"})}),e.jsx("div",{className:"h-[91px] flex flex-col justify-center items-center bg-[#d1edde] w-full rounded-[15px] mt-4 mb-3",children:e.jsx("p",{children:"Weâ€™ve sent a verification code to your email"})}),e.jsx(N,{expiryTime:r,visible:u&&o,onExpiry:()=>{i(!1),m(!1)}}),e.jsxs("form",{onSubmit:g,className:"max-w-sm mx-auto mt-3 ",children:[e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"email",className:"block mb-2 text-sm font-medium text-gray-900 ",children:"Enter OTP"}),e.jsx("input",{type:"number",id:"otp",name:"otp",onChange:t=>a(t.target.value),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 ",required:!0})]}),e.jsx("div",{className:"flex justify-center w-full px-6 ",children:e.jsx("button",{type:"submit",className:"text-white w-full bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm  px-14 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:"Verify"})}),!o&&e.jsx("div",{className:"flex justify-center mt-3 ",children:e.jsxs("p",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400",children:["Didn't receive OTP yet?"," ",e.jsx("button",{type:"button",onClick:b,className:"font-medium  text-blue-600 hover:underline ",children:"Resend OTP"}),"."]})})]})]})})]})})})};export{O as default};
