import{i as s,_ as n}from"./index-gIIwSxQ2.js";async function i({username:t}){try{const{data:r}=await s.get(`/user/${t}`);return{data:r}}catch{return{error:"Password doesn't Match...!"}}}async function u(t){try{const{data:{msg:r},status:e}=await s.post("/register",t),{username:a,email:o}=t;return e===200&&(console.log('user registered Status "200"'),await s.post("/registerMail",{username:a,userEmail:o,text:r})),Promise.resolve(r)}catch(r){return n.error(r.response.data.message),Promise.reject({error:r})}}async function d(t){try{const{data:{msg:r},status:e}=await s.post("/admin/register",t),{name:a,email:o}=t;return e===200&&(console.log("ok"),await s.post("/registerMail",{name:a,userEmail:o,text:r})),Promise.resolve(r)}catch(r){return Promise.reject({error:r})}}async function l({email:t,password:r}){try{if(t){const{data:e}=await s.post("/admin/login",{email:t,password:r});return Promise.resolve({data:e})}}catch{return Promise.reject({error:"Password doesn't Match...! "})}}async function g({username:t,password:r}){try{if(t){const{data:e}=await s.post("/login",{username:t,password:r});return console.log("login verifyPassword:",e),{success:!0,data:e}}}catch(e){return console.log(e.response),e.response&&e.response.data.message==="user is not verified"?{verified:!1}:(n.error(e.response.data.message),{error:"Password doesn't Match...! "})}}async function P(t){console.log("generateOTP called",t);try{const{data:{code:r},status:e}=await s.get("/generateOTP",{params:{username:t}});if(e===201){const{data:{email:a}}=await i({username:t}),o=`Your Password Recovery OTP is ${r}. Verify and recover your password.`;await s.post("/registerMail",{username:t,userEmail:a,text:o,subject:"Password Recovery OTP"})}return Promise.resolve(r)}catch(r){return Promise.reject({error:r})}}async function y({username:t,code:r}){try{console.log("verifyOTP helper:",t,r);const{data:e,status:a}=await s.get("/verifyOTP",{params:{username:t,code:r}});return console.log(e),{data:e,status:a}}catch(e){return console.error("An error occurred while verifying OTP:",e),Promise.reject(e)}}async function f({username:t,password:r}){try{const{data:e,status:a}=await s.put("/resetPassword",{username:t,password:r});return Promise.resolve({data:e,status:a})}catch(e){return Promise.reject({error:e})}}export{g as a,u as b,l as c,d,P as g,f as r,y as v};
