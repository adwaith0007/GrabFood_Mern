import{G as u,u as j,a as N,b as w,r as m,w as p,j as e,U as y,i as g,_ as I,e as C,q as z}from"./index-UXfRQDu2.js";function E(l){return u({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M17 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"}}]})(l)}function k(l){return u({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 000-1.41l-2.34-2.34a.996.996 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}}]})(l)}function M(l){return u({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}}]})(l)}const D="https://www.grabfood.life",U=()=>{const{user:l}=j(a=>a.userReducer),o=l._id,h=N(),f=w(),[n,c]=m.useState(!1),[t,i]=m.useState({name:"",gender:"",email:"",phoneNumber:"",profileImage:""});m.useEffect(()=>{(async()=>{try{const s=await g.get(`/user/get/${o}`);if(console.log("data:",s.data),s&&s.data){const r=s.data.data;i({name:r.username,gender:r.gender,email:r.email,phoneNumber:r.phone,profileImage:r.profilePicture})}}catch(s){console.error("Error fetching user data:",s),I.error(s.response.data.message),s.response.data.message==="User is blocked"&&(C.remove("token"),f(z()),h("/login"))}})()},[o]);const x=()=>{c(!0)},b=async()=>{try{const a=new FormData;a.append("name",t.name),a.append("gender",t.gender),a.append("email",t.email),a.append("phoneNumber",t.phoneNumber),a.append("profileImage",t.profileImage);const s=await g.put(`/user/edit/${o}`,a,{headers:{"Content-Type":"multipart/form-data"}});s.status===200?(console.log("User profile updated successfully"),i(r=>({...r,profileImage:s.data.data.profilePicture}))):console.error("Error updating user profile"),c(!1)}catch(a){console.error("Error updating user profile:",a)}},d=(a,s)=>{if(a==="profileImage"){const r=s[0];i({...t,[a]:r})}else i({...t,[a]:s})},v=typeof t.profileImage=="string"?`${D}/${t.profileImage.replace(/ /g,"%20")}`:`${p}`;return e.jsxs("div",{className:"admin-container",children:[e.jsx(y,{}),e.jsx("div",{className:"container flex flex-col items-center  mx-auto mt-10 p-6 bg-white rounded-md shadow-md",children:e.jsxs("div",{className:" flex flex-col justify-center items-center border-2 rounded-[10px] shadow w-[350px] h-[450px] mt-5 ",children:[e.jsxs("div",{className:"flex flex-col items-center  ",children:[e.jsx("div",{className:"relative w-32 h-32",children:e.jsx("img",{src:v||p,alt:"user",className:"w-full h-full object-cover rounded-full"})}),n&&e.jsxs("label",{htmlFor:"profileImage",className:" cursor-pointer",children:[e.jsx("input",{type:"file",id:"profileImage",accept:"image/*",className:"hidden",onChange:a=>d("profileImage",a.target.files)}),e.jsx("span",{className:"p-1  bg-blue-500 text-white rounded-full",children:"Change Image"})]}),e.jsx("div",{children:e.jsx("div",{className:"font-semibold text-lg",children:l.name})})]}),e.jsxs("div",{className:"mt-6  flex flex-col justify-center items-center ",children:[e.jsx("div",{className:"flex items-center mb-4",children:n?e.jsx("input",{type:"email",value:t.email,onChange:a=>d("email",a.target.value),className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 ",placeholder:"Email"}):e.jsx("span",{children:t.email})}),e.jsx("div",{className:"flex w-full justify-center items-center mb-4",children:n?e.jsx("input",{type:"tel",value:t.phoneNumber,onChange:a=>d("phoneNumber",a.target.value),className:"bg-gray-50 border   border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500  w-full p-2.5 ",placeholder:"Phone Number"}):e.jsx("span",{children:t.phoneNumber})})]}),e.jsx("div",{className:"flex items-center justify-between mt-10 ",children:n?e.jsxs("div",{className:"flex  justify-center items-center gap-[100px]",children:[e.jsxs("button",{onClick:b,className:"text-green-500 hover:underline cursor-pointer",children:[e.jsx(E,{size:20,className:"inline-block mb-1"}),"Save"]}),e.jsxs("button",{onClick:()=>c(!1),className:"text-red-500 hover:underline cursor-pointer",children:[e.jsx(M,{size:20,className:"inline-block mb-1"}),"Cancel"]})]}):e.jsxs("button",{onClick:x,className:"text-blue-500 hover:underline cursor-pointer",children:[e.jsx(k,{size:20,className:"inline-block mb-1"}),"Edit Profile"]})})]})})]})};export{U as default};
