import{r as t,j as e,L as i,S as a,T as g,F as f,i as j}from"./index-kT7O4JRC.js";const m="https://www.grabfood.life",w=[{Header:"Photo",accessor:"photo"},{Header:"Name",accessor:"name"},{Header:"Price",accessor:"price"},{Header:"Category",accessor:"category"},{Header:"Action",accessor:"action"}],y=()=>{const[o,l]=t.useState([]),[r,u]=t.useState([]),[c,h]=t.useState(!0);t.useEffect(()=>{(async()=>{try{const s=await j.get("/product/get");s.data.success&&l(s.data.data)}catch(s){console.error("Error while loading products",s)}finally{h(!1)}})()},[]),t.useEffect(()=>{if(c)return;const n=o.map(s=>{var d;return{photo:e.jsx("img",{src:`${m}/${(d=s.productImage[0])==null?void 0:d.replace(/ /g,"%20")}`,alt:s.name}),name:s.productName,price:s.discountPrice<s.price&&s.discountPrice?e.jsxs("p",{children:[e.jsxs("span",{className:"text-xl font-semibold text-slate-900",children:["₹",s.discountPrice]}),e.jsxs("span",{className:"text-sm text-slate-900 line-through",children:["₹",s.price]})]}):e.jsx("p",{children:e.jsxs("span",{className:"text-xl font-semibold text-slate-900",children:["₹",s.price]})}),category:s.category,action:e.jsx(i,{to:`/admin/product/${s._id}`,children:"Manage"})}});u(n)},[o,c]);const p=t.useMemo(()=>Array.from({length:6}).map(()=>({photo:e.jsx(a,{width:80,height:80}),name:e.jsx(a,{width:120}),price:e.jsx(a,{width:60}),category:e.jsx(a,{width:100}),action:e.jsx(a,{width:60})})),[]),x=g(w,c?p:r,"dashboard-product-box","Products",r.length>6)();return e.jsxs("div",{className:"h-full",children:[e.jsx("main",{className:"h-full",children:x}),e.jsx(i,{to:"/admin/product/add",className:"create-product-btn",children:e.jsx(f,{})})]})};export{y as default};
