import{u as L,r,j as e,S as o,T as R,i as d,_ as c}from"./index-tC-h3qrC.js";const S=[{Header:e.jsx("div",{className:"flex justify-center ",children:"Item"}),accessor:"item"},{Header:e.jsx("div",{className:"flex justify-center ",children:"Product Name"}),accessor:"productName"},{Header:e.jsx("div",{className:"flex justify-center ",children:"Unit Price"}),accessor:"unitPrice"},{Header:e.jsx("div",{className:"flex justify-center ",children:"Action"}),accessor:"action"}],I=()=>{const{user:l}=L(t=>t.userReducer),a=l==null?void 0:l._id,g="https://www.grabfood.life",[p,j]=r.useState([]),[u,i]=r.useState([]),[m,v]=r.useState(null),[w,n]=r.useState(!1),[f,y]=r.useState(null),[x,b]=r.useState(!0);r.useEffect(()=>{const t=s=>{s.target.closest(".dropdown")||v(null)};return m!==null&&document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[m]);const N=t=>{d.put(`/cart/add/wishlist/${a}`,{productId:t,quantity:1}).then(s=>{c.success("Product added to cart successfully"),i(s.data.data)}).catch(s=>{console.error("Failed to add product to cart. Please try again later.",s),c.error(s.response.data.message)})},k=t=>{console.log("productId:",t),n(!0),y(t)},P=async()=>{console.log("confirmHandleRemove:",f),await d.put(`/wishlist/remove/${a}`,{productId:f,quantity:1}).then(t=>{c.success("Product removed from Favorites successfully"),i(t.data.data),n(!1)}).catch(t=>{console.error("Failed to remove product from Favorites. Please try again later.",t),c.error(t.response.data.message)})},C=async()=>{try{const t=await d.get(`/user/${a}/wishlist`);t.data.success?i(t.data.data):console.error("Failed to fetch user orders:",t.data.error)}catch(t){console.error("Error fetching user orders:",t)}finally{b(!1)}};r.useEffect(()=>{C()},[a]);const h=r.useMemo(()=>Array(1).fill({}).map(()=>({item:e.jsx("div",{className:" flex justify-center  ",children:e.jsx(o,{height:55,width:62})}),productName:e.jsx("div",{className:"flex flex-col justify-center items-center gap-1",children:e.jsx(o,{width:150,height:20})}),unitPrice:e.jsx("div",{className:"flex justify-center",children:e.jsx(o,{width:80,height:20})}),action:e.jsx("div",{className:"flex justify-center items-center  flex-col",children:e.jsxs("div",{className:"py-1 flex gap-5",role:"none",children:[e.jsx(o,{width:142,height:44}),e.jsx(o,{width:142,height:44})]})})})),[]);r.useEffect(()=>{const t=x?h:u.map(s=>({item:e.jsx("div",{className:" flex justify-center  ",children:e.jsx("img",{className:"flex justify-center items-center ",src:`${g}/${s==null?void 0:s.productImage}`,alt:s==null?void 0:s.productName})}),productName:e.jsx("div",{className:"flex flex-col justify-center gap-1",children:e.jsx("div",{className:"flex justify-center",children:s==null?void 0:s.productName})}),unitPrice:e.jsxs("div",{className:"flex justify-center",children:["â‚¹",s!=null&&s.discountPrice?s.discountPrice:s.price]}),action:e.jsx("div",{className:"flex justify-center items-center  flex-col",children:e.jsxs("div",{className:"py-1 flex gap-5",role:"none",children:[e.jsx("button",{className:"flex gap-3 w-36 border rounded justify-center bg-black text-white py-3 text-sm hover:bg-gray-100 hover:text-gray-900",role:"menuitem",onClick:()=>N(s.productId),children:e.jsx("span",{children:"Add To Cart"})}),e.jsx("button",{className:"flex border w-36 rounded justify-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-100 hover:text-gray-900",role:"menuitem",onClick:()=>k(s.productId),children:e.jsx("span",{children:"Remove"})})]})},s._id)}));j(t)},[u,x,h]);const F=R(S,p,"dashboard-product-box","Products")();return e.jsxs("div",{className:"h-full",children:[e.jsx("main",{className:"h-full",children:F}),w&&e.jsx("div",{className:"fixed z-10 inset-0 overflow-y-auto bg-opacity-35 bg-black flex items-center justify-center",children:e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline",children:[e.jsx("div",{className:"hidden sm:block absolute top-0 right-0 pt-4 pr-4",children:e.jsxs("button",{onClick:()=>n(!1),type:"button",className:"bg-white rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})]})}),e.jsxs("div",{className:"sm:flex sm:items-start",children:[e.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10",children:e.jsx("svg",{className:"h-6 w-6 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline",children:"Are you sure you want to remove this item from Favorites?"})})]}),e.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{onClick:P,type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Remove"}),e.jsx("button",{onClick:()=>n(!1),type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:text-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})]})]})})]})};export{I as default};
