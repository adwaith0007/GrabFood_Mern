import{j as e,u as U,r as a,L as J,q as K,s as V,i as n,b as Y,a as Z,t as ee,_ as u,e as te,h as re,S as l,g as A}from"./index-kT7O4JRC.js";const se=({name:o,imageUrl:c,handler:m})=>{const d=()=>{m(o)};return e.jsx("div",{className:"flex flex-col  items-center gap-3",children:e.jsxs("button",{onClick:d,children:[e.jsx("div",{className:"w-[200px] h-[192px]  rounded-[100%] flex justify-center overflow-hidden shadow-md",children:e.jsx("img",{className:"object-fit object-cover w-full h-full rounded-[100%] cursor-pointer",src:c,alt:""})}),e.jsx("h3",{className:"font-bold",children:o})]})})},ae=({productId:o,price:c,name:m,discountPrice:d,offerInPercentage:N,description:p,imageUrl:k,onAddToCart:S})=>{const{user:C}=U(r=>r.userReducer),i=C._id,[f,L]=a.useState([]),h=async()=>{try{const r=await n.get(`/user/${i}/wishlist`);r.data.success?L(r.data.data):console.error("Failed to fetch user orders:",r.data.error)}catch(r){console.error("Error fetching user orders:",r)}};a.useEffect(()=>{h()},[i]);const _=async()=>{try{const r=C._id;(await n.post("/user/wishlist/toggle_add",{userId:r,productId:o})).data.success&&h()}catch(r){console.error(r)}};return e.jsxs("div",{className:"relative m-10 flex w-full max-w-xs  flex-col overflow-hidden rounded-lg border border-gray-100 bg-white shadow-md",children:[e.jsxs(J,{className:"relative mx-3 mt-3 flex h-60 overflow-hidden rounded-xl",to:`/product/${o}`,children:[e.jsx("img",{className:"object-cover",src:k,alt:"product image"}),N&&e.jsxs("span",{className:"absolute top-0 left-0 m-2 rounded-full bg-black px-2 text-center text-sm font-medium text-white",children:[N,"% OFF"]})]}),e.jsx("button",{onClick:_,className:" absolute z-10 top-0 right-0 mt-4 mr-6 rounded-full bg-black px-2 border focus:outline-none",children:e.jsx(K,{icon:V,color:f.some(r=>r.productId===o)?"red":"white"})}),e.jsxs("div",{className:"mt-4 px-5 pb-5",children:[e.jsx("a",{href:"#",children:e.jsx("h5",{className:"text-xl tracking-tight text-slate-900 line-clamp-1 ",children:m})}),e.jsxs("div",{className:"mt-2 mb-2 flex items-center justify-between",children:[d<c&&d?e.jsxs("p",{children:[e.jsxs("span",{className:"text-3xl font-bold text-slate-900",children:["₹",d]}),e.jsxs("span",{className:"text-sm text-slate-900 line-through",children:["₹",c]})]}):e.jsx("p",{children:e.jsxs("span",{className:"text-3xl font-bold text-slate-900",children:["₹",c]})}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{"aria-hidden":"true",className:"h-5 w-5 text-yellow-300",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),e.jsx("svg",{"aria-hidden":"true",className:"h-5 w-5 text-yellow-300",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),e.jsx("svg",{"aria-hidden":"true",className:"h-5 w-5 text-yellow-300",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),e.jsx("svg",{"aria-hidden":"true",className:"h-5 w-5 text-yellow-300",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),e.jsx("svg",{"aria-hidden":"true",className:"h-5 w-5 text-yellow-300",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),e.jsx("span",{className:"mr-2 ml-3 rounded bg-yellow-200 px-2.5 py-0.5 text-xs font-semibold",children:"5.0"})]})]}),e.jsx("div",{className:"px-4 mb-4 hidden md:block overflow-hidden h-10 ",children:e.jsx("p",{className:"text-sm text-slate-900 line-clamp-2",children:p})}),e.jsxs("button",{onClick:S,className:"flex w-full items-center justify-center rounded-md bg-slate-900 px-5 py-2.5 text-center text-sm font-medium text-white hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-blue-300",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mr-2 h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),"Add to cart"]})]})]})},v="https://www.grabfood.life",oe=()=>{const{user:o}=U(t=>t.userReducer),c=Y(),m=Z(),d=o==null?void 0:o._id,N=ee(),p=new URLSearchParams(N.search).get("q"),[k,S]=a.useState([]),[C,i]=a.useState([]),[f,L]=a.useState([]),[h,_]=a.useState(""),[r,w]=a.useState(1),[P,j]=a.useState(1),[T,E]=a.useState(!0),[M,R]=a.useState(""),[g,y]=a.useState(!1),[I,B]=a.useState(!1),[D,z]=a.useState(!0),b=8;a.useEffect(()=>{(async()=>{z(!0);try{const s=await n.get("/category/get");s.data.success&&S(s.data.data)}catch(s){u.error("Error while loading categories"),console.log(s)}finally{z(!1)}})()},[]),a.useEffect(()=>{p?F(p):H()},[h,r,p]),a.useEffect(()=>{H()},[h,r]),a.useEffect(()=>{function t(s){s.target.id!="menu-item-0"&&(console.log(s),y(!1),B(!1))}return(g||I)&&document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[g,I]);const H=async()=>{E(!0);try{const t=await n.get(`/product/get/user?category=${h}&page=${r}&limit=${b}`);t.data.success?(i(t.data.data),j(t.data.totalPages),E(!1)):console.error("Failed to fetch products",t.data.error)}catch(t){u.error("Error while loading products"),console.log("status:",t),t.response.data.message==="User is blocked"&&(te.remove("token"),c(re()),m("/login"))}},Q=()=>{console.log("clicked best pro");try{n.get(`/product/get_best?category=${h}&page=${r}&limit=${b}`).then(t=>{t.data.success&&(i(t.data.data),j(t.data.totalPages))}),y(!g)}catch(t){u.error("Error while loading products"),console.log(t)}},O=async()=>{try{const t=await n.get(`/product/get_LowToHigh?page=${r}&limit=${b}`);t.data.success?(i(t.data.data),j(t.data.totalPages)):console.error("Unsuccessful response from the API:",t.data.message),y(!g)}catch(t){u.error("Error while loading products"),console.error("API call error:",t)}},W=async()=>{console.log("clicked");try{const t=await n.get(`/product/get_HighToLow?page=${r}&limit=${b}`);t.data.success?(i(t.data.data),j(t.data.totalPages)):console.error("Unsuccessful response from the API:",t.data.message),y(!g)}catch(t){u.error("Error while loading products"),console.error("API call error:",t)}},F=t=>{try{n.get(`/product/search?q=${t}&page=${r}&limit=${b}`).then(s=>{s.data.success&&(i(s.data.data),j(s.data.totalPages))})}catch(s){u.error("Error while searching products"),console.log(s)}},X=t=>{n.post(`/cart/add/${d}`,{product:t,quantity:1}).then(x=>console.log("Product added to cart:",x.data)).catch(x=>console.error("Error adding to cart:",x));const s=f.find(x=>x.productId===t._id);if(s){const x=f.map($=>$.productId===t._id?{...$,quantity:$.quantity+1}:$);c(A({name:t.productName,productId:t._id,price:t.price,imageUrl:`${v}/${t.productImage[0].replace(/ /g,"%20")}`,quantity:s.quantity+1})),L(x)}else c(A({name:t.productName,productId:t._id,price:t.price,imageUrl:`${v}/${t.productImage[0].replace(/ /g,"%20")}`,quantity:1})),L([...f,{productId:t._id,quantity:1,name:t.productName,price:t.price,imageUrl:`${v}/${t.productImage[0].replace(/ /g,"%20")}`}]);u.success(`${t.productName} added to cart!`)},q=t=>{_(t),w(1)},G=t=>{t.preventDefault(),F(M)};return e.jsxs("div",{className:"bg-[#e5d9ca] h-full min-h-screen ",children:[e.jsxs("div",{className:"container custom-height flex flex-col justify-center items-center mx-auto  ",children:[e.jsx("div",{className:" lg:hidden mt-5 flex justify-center items-center",children:e.jsx("div",{className:"relative text-gray-600",children:e.jsxs("form",{onSubmit:G,children:[e.jsx("input",{type:"search",name:"search",value:M,onChange:t=>R(t.target.value),placeholder:"Search...",className:"bg-white h-10 px-5 pr-10 rounded-full text-sm focus:outline-none"}),e.jsx("button",{type:"submit",className:"absolute right-0 top-0 mt-3 mr-4",children:e.jsx("svg",{className:"h-4 w-4 fill-current",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",version:"1.1",id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 56.966 56.966",xmlSpace:"preserve",width:"512px",height:"512px",children:e.jsx("path",{d:"M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z"})})})]})})}),e.jsx("div",{className:"hidden lg:flex  justify-center gap-4 mt-8",children:D?Array.from({length:6}).map(()=>e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("div",{className:"w-[200px] h-[192px] rounded-[100%] flex justify-center overflow-hidden shadow-md",children:e.jsx(l,{circle:!0,height:192,width:192})}),e.jsx("h3",{className:"font-bold",children:e.jsx(l,{width:100})})]})):k.map(t=>e.jsx("div",{children:t.categoryImage&&t.categoryImage[0]&&e.jsx(e.Fragment,{children:e.jsx(se,{name:t.category,imageUrl:`${v}/${t.categoryImage[0].replace(/ /g,"%20")}`,handler:()=>q(t.category)})})},t._id))}),e.jsxs("div",{className:"w-full h-full border-t mt-5 border-[#9a9b9e] flex justify-between ",children:[e.jsxs("div",{className:"relative inline-block text-left",children:[e.jsx("div",{children:e.jsxs("button",{onClick:()=>y(!g),type:"button",className:"inline-flex w-full justify-center gap-x-1.5 mt-2  px-3 py-2 text-sm font-semibold text-gray-900  ",id:"menu-button","aria-expanded":"true","aria-haspopup":"true",children:["Sort",e.jsx("svg",{className:"-mr-1 h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z","clip-rule":"evenodd"})})]})}),g&&e.jsx("div",{className:"absolute left-0 ml-2 z-20 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",role:"menu","aria-orientation":"vertical","aria-labelledby":"menu-button",children:e.jsxs("div",{className:"py-1",role:"none",id:"hello",children:[e.jsx("button",{onClick:()=>{Q()},className:"text-gray-700 block px-4 py-2 text-sm",role:"menuitem",id:"menu-item-0",children:"Best selling product"}),e.jsx("button",{onClick:()=>{O()},className:"text-gray-700 block px-4 py-2 text-sm",role:"menuitem",id:"menu-item-0",children:"Price: Low to High"}),e.jsx("button",{onClick:()=>{W()},className:"text-gray-700 block px-4 py-2 text-sm",role:"menuitem",id:"menu-item-0",children:"Price: High to Low"})]})})]}),e.jsxs("div",{className:"relative lg:hidden inline-block text-left",children:[e.jsx("div",{children:e.jsxs("button",{onClick:()=>B(!I),type:"button",className:"inline-flex w-full justify-center gap-x-1.5 mt-2  px-3 py-2 text-sm font-semibold text-gray-900  ",id:"menu-button","aria-expanded":"true","aria-haspopup":"true",children:["Category",e.jsx("svg",{className:"-mr-1 h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z","clip-rule":"evenodd"})})]})}),I&&e.jsx("div",{className:"absolute right-0 z-20 mt-2 mr-2  w-40 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",role:"menu","aria-orientation":"vertical","aria-labelledby":"menu-button",children:e.jsx("div",{className:"py-1",role:"none",children:k.map(t=>e.jsx("div",{children:t.categoryImage&&t.categoryImage[0]&&e.jsx(e.Fragment,{children:e.jsx("button",{onClick:()=>q(t.category),className:"text-gray-700 block px-4 py-2 text-sm",role:"menuitem",id:"menu-item-0",children:t.category})})},t._id))})})]})]}),e.jsx("div",{className:"  grid grid-cols-1  justify-center  md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:T?Array.from({length:8}).map((t,s)=>e.jsx("div",{className:"flex",children:e.jsxs("div",{className:"relative m-10 flex w-[297px] max-w-xs flex-col overflow-hidden rounded-lg border border-gray-100 bg-white shadow-md",children:[e.jsx("div",{className:"relative mx-3 mt-3 flex h-60 overflow-hidden rounded-xl",children:e.jsx(l,{className:"rounded",width:278,height:249})}),e.jsxs("div",{className:"mt-4 px-5 pb-5",children:[e.jsx("h5",{className:"text-xl tracking-tight text-slate-900 line-clamp-1",children:e.jsx(l,{width:"80%"})}),e.jsxs("div",{className:"mt-2 mb-2 flex items-center justify-between",children:[e.jsx("p",{children:e.jsx(l,{width:70,height:30})}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(l,{width:20,height:20}),e.jsx(l,{width:20,height:20}),e.jsx(l,{width:20,height:20}),e.jsx(l,{width:20,height:20}),e.jsx(l,{width:20,height:20}),e.jsx("span",{className:"mr-2 ml-3 rounded  px-2.5 py-0.5 text-xs font-semibold",children:e.jsx(l,{width:20})})]})]}),e.jsx("div",{className:"px-4 mb-4 hidden md:block overflow-hidden h-10",children:e.jsx(l,{count:2})}),e.jsx(l,{baseColor:"#313131",highlightColor:"#525252",className:" w-full  rounded-md  px-5 py-2.5  "})]})]})},s)):C.map(t=>e.jsx("div",{className:"flex",children:t.productImage&&t.productImage[0]&&e.jsx(ae,{productId:t._id,price:t.price,description:t.Description,name:t.productName,discountPrice:t==null?void 0:t.discountPrice,offerInPercentage:t.offerInPercentage,imageUrl:`${v}/${t.productImage[0].replace(/ /g,"%20")}`,onAddToCart:()=>X(t)})},t._id))})]}),e.jsx("div",{className:"flex justify-center pt-2 pb-10  ",children:e.jsx("nav",{"aria-label":"Page navigation example",children:e.jsxs("ul",{className:"inline-flex -space-x-px text-base h-10",children:[e.jsx("li",{children:e.jsx("button",{onClick:()=>w(t=>Math.max(t-1,1)),disabled:r===1,className:`flex items-center justify-center px-4 h-10 leading-tight text-gray-500 bg-white border border-e-0 border-gray-300 rounded-l-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white ${r===1?"cursor-not-allowed":"cursor-pointer"}`,children:"Previous"})}),[...Array(P)].map((t,s)=>e.jsx("li",{children:e.jsx("button",{onClick:()=>w(s+1),className:`flex items-center justify-center px-4 h-10 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white ${r===s+1?"text-blue-600 bg-blue-50 hover:bg-blue-100 hover:text-blue-700 dark:border-gray-700 dark:bg-gray-700 dark:text-white":""}`,children:s+1})},s)),e.jsx("li",{children:e.jsx("button",{onClick:()=>w(t=>Math.min(t+1,P)),disabled:r===P,className:`flex items-center justify-center px-4 h-10 leading-tight text-gray-500 bg-white border border-gray-300 rounded-r-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white ${r===P?"cursor-not-allowed":"cursor-pointer"}`,children:"Next"})})]})})})]})};export{oe as default};
