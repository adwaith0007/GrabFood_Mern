import{r as o,j as e,A as C,_ as w,i as j,u as k}from"./index-kT7O4JRC.js";const F=({userId:r,setAddress:h,onClose:s})=>{const[i,u]=o.useState(""),[p,n]=o.useState(""),[g,x]=o.useState(""),[a,c]=o.useState(""),N=async d=>{d.preventDefault();const t={street:i,city:p,state:g,zipCode:a};try{if(!r){console.error("User ID is undefined");return}if(!t.city||!t.state||!t.street||!t.zipCode){w.error("Please fill in all address fields.");return}const m=/^[a-zA-Z0-9\s,'().&\/\-#]+$/;if(!t.city||!m.test(t.city)||!t.state||!m.test(t.state)||!t.street||!m.test(t.street)||!t.zipCode||!m.test(t.zipCode)){w.error("Invalid address.");return}await j.put(`/addaddresses/${r}`,{userId:r,address:t}),j.get(`/user/${r}/addresses`).then(f=>{if(f.data.length!=0){const b=f.data[0];h(b)}else console.log(" add no address")}),s()}catch(m){console.error(m)}};return e.jsx("div",{className:"fixed top-0 right-0 left-0 bottom-0 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white p-8 z-50 rounded-md shadow-md md:w-[400px]",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:s,className:"text-gray-600 hover:text-gray-800",children:e.jsx(C,{size:24})})}),e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Enter Your Address "}),e.jsxs("form",{onSubmit:N,children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{htmlFor:"street",className:"block text-sm font-medium text-gray-600",children:"Street:"}),e.jsx("input",{type:"text",id:"street",value:i,onChange:d=>u(d.target.value),className:"mt-1 p-2 border rounded-md w-full"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-600",children:"City:"}),e.jsx("input",{type:"text",id:"city",value:p,onChange:d=>n(d.target.value),className:"mt-1 p-2 border rounded-md w-full"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-600",children:"State:"}),e.jsx("input",{type:"text",id:"state",value:g,onChange:d=>x(d.target.value),className:"mt-1 p-2 border rounded-md w-full"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{htmlFor:"zipCode",className:"block text-sm font-medium text-gray-600",children:"ZIP Code:"}),e.jsx("input",{type:"text",id:"zipCode",value:a,onChange:d=>c(d.target.value),className:"mt-1 p-2 border rounded-md w-full"})]}),e.jsx("button",{type:"submit",className:"mt-4 p-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Save Address"})]})]})})},_=({onClose:r,onAddressSelect:h})=>{const{user:s}=k(a=>a.userReducer),i=s._id,[u,p]=o.useState([]),[n,g]=o.useState(null);o.useEffect(()=>{i&&j.get(`/user/${i}/addresses`).then(a=>{p(a.data)}).catch(a=>{console.error(a)})},[i]);const x=a=>{a.preventDefault(),n&&(h(n),r()),console.log(n)};return e.jsx("div",{className:"fixed top-0 right-0 left-0 bottom-0 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white p-8 z-50 rounded-md shadow-md w-[400px]",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:r,className:"text-gray-600 hover:text-gray-800",children:e.jsx(C,{size:24})})}),e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Choose Your Address"}),e.jsxs("form",{onSubmit:x,className:"mt-5 grid gap-6   ",children:[e.jsx("div",{className:"h-[300px]    overflow-auto",children:u.map((a,c)=>e.jsxs("div",{className:"relative mb-2 mx-3 ",children:[e.jsx("input",{className:"peer hidden",id:`radio_${c}`,type:"radio",name:"radio",onChange:()=>g(a)}),e.jsx("span",{className:"peer-checked:border-gray-700 absolute right-4 top-1/2 box-content block h-3 w-3 -translate-y-1/2 rounded-full border-8 border-gray-300 bg-white"}),e.jsx("label",{className:"peer-checked:border-2 peer-checked:border-gray-700 peer-checked:bg-gray-50 flex cursor-pointer select-none rounded-lg border border-gray-300 p-4",htmlFor:`radio_${c}`,children:e.jsxs("div",{className:"ml-5",children:[e.jsx("span",{className:"mt-2 font-semibold",children:a.street}),e.jsx("p",{className:"text-slate-500 text-sm leading-6",children:"Delivery: 2-4 Days"})]})})]},c))}),e.jsx("button",{type:"submit",className:"mt-4 p-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Save Address"})]})]})})},D=({userId:r,onhandleUpdateAddress:h,currentAddress:s,onClose:i})=>{const[u,p]=o.useState(s.street||""),[n,g]=o.useState(s.city||""),[x,a]=o.useState(s.state||""),[c,N]=o.useState(s.zipCode||""),[d,t]=o.useState(!1),[m,f]=o.useState(null),b=async l=>{l.preventDefault();const y={_id:s._id,street:u,city:n,state:x,zipCode:c},v=/^[a-zA-Z0-9\s,'().&\/\-#]+$/;if(!u||!v.test(u)||!n||!v.test(n)||!x||!v.test(x)||!c||!v.test(c)){f("Invalid address. Each field must contain at least 3 letters.");return}try{if(t(!0),!r){console.error("User ID is undefined");return}await j.put(`/user/${r}/addresses/${s._id}`,{userId:r,addressId:s._id,address:y}),h(y),i()}catch(z){console.error(z),f("Failed to update address. Please try again.")}finally{t(!1)}},S=async()=>{try{t(!0),await j.delete(`/user/${r}/addresses/${s._id}`),j.get(`/user/${r}/addresses`).then(l=>{if(l.data.length!=0){const y=l.data[0];h(y)}else console.log("no address"),h("no_address")}),i()}catch(l){console.error(l),f("Failed to delete address. Please try again.")}finally{t(!1)}};return e.jsx("div",{className:"fixed top-0 right-0 left-0 bottom-0 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white p-8 z-50 rounded-md shadow-md w-[400px]",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:i,className:"text-gray-600 hover:text-gray-800",children:e.jsx(C,{size:24})})}),e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Update Your Address "}),m&&e.jsx("p",{className:"text-red-500 mb-2",children:m}),e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{htmlFor:"street",className:"block text-sm font-medium text-gray-600",children:"Street:"}),e.jsx("input",{type:"text",id:"street",placeholder:s.street,value:u,onChange:l=>p(l.target.value),onBlur:b,className:"mt-1 p-2 border rounded-md w-full"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-gray-600",children:"City:"}),e.jsx("input",{type:"text",id:"city",value:n,placeholder:s.city,onChange:l=>g(l.target.value),onBlur:b,className:"mt-1 p-2 border rounded-md w-full"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{htmlFor:"state",className:"block text-sm font-medium text-gray-600",children:"State:"}),e.jsx("input",{type:"text",id:"state",placeholder:s.state,value:x,onChange:l=>a(l.target.value),onBlur:b,className:"mt-1 p-2 border rounded-md w-full"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{htmlFor:"zipCode",className:"block text-sm font-medium text-gray-600",children:"ZIP Code:"}),e.jsx("input",{type:"text",id:"zipCode",placeholder:s.zipCode,value:c,onChange:l=>N(l.target.value),onBlur:b,className:"mt-1 p-2 border rounded-md w-full"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{type:"submit",className:"mt-4 p-2 px-4 bg-blue-500 text-white rounded-md hover:bg-blue-600",disabled:d,children:d?"Updating...":"Update Address"}),e.jsx("button",{type:"button",onClick:S,className:"mt-4 p-2 px-4 bg-red-500 text-white rounded-md hover:bg-red-600 ml-2",disabled:d,children:d?"Deleting...":"Delete Address"})]})]})]})})};export{F as A,_ as C,D as U};
